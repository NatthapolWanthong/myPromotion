<!-- Overlay Promotion Condition -->
<div id="condition-overlay" class="d-none position-fixed top-0 start-0 w-100 h-100 bg-white" style="z-index:1050;">
  <div class="d-flex justify-content-between align-items-center p-3 border-bottom">
    <h5>Advance Promotion</h5>
    <!-- Tabs -->
    <ul class="nav nav-tabs" id="conditionTab">
        <li class="nav-item">
            <a class="nav-link active" data-target="#basic-content" href="#">Basic</a>
        </li>
        <li class="nav-item">
            <a class="nav-link nonActive" data-target="#advance-content" href="#">Advance</a>
        </li>
    </ul>
    <button id="btn-close-condition" class="btn btn-secondary">X</button>
  </div>

  <div class="p-0 d-flex flex-column" style="height: calc(100% - 56px);">
    <!-- Basic Content -->
    <div id="basic-content" class="tab-content-container p-4 flex-shrink-0">
        <form class="row g-3 needs-validation" novalidate>
            <div class="col-sm-6">
                <label for="form-name" class="form-label">ชื่อเงื่อนไข</label>
                <input type="text" class="form-control" id="condition-form-name" placeholder="กรอกชื่อเงื่อนไข" required>
                <div class="invalid-feedback">ต้องกรอกชื่อเงื่อนไข</div>
            </div>
            <div class="col-md-6">
                <label for="form-type" class="form-label">เทมเพลต</label>
                <select class="form-select ch" id="form-type" required>
                    <option>Save1</option>
                </select>
                <div class="invalid-feedback">ต้องเลือกประเภทเงื่อนไข</div>
            </div>

            <!-- Condition -->
            <div class="condition form-border p-3">
                <h1 class="modal-title fs-5">เงื่อนไข</h1>
                <div class="row g-3">
                    <div class="col-md-5">
                        <label class="form-label">Action/Object</label>
                        <div class="input-group">
                            <select class="form-select ch condition-form-action" required></select>
                            <select class="form-select ch condition-form-object" id="objectSelect" required></select>
                            <div class="invalid-feedback">ต้องเลือกประเภท</div>
                        </div>
                    </div>
                    <!-- ช่องเลือกสินค้า (จะถูกเติมจาก modalProductList) -->
                    <div class="mt-3 d-none" id="productSelectionWrapper">
                        <label class="form-label">สินค้า</label>
                        <div class="input-group">
                            <input type="text" id="selectedProductName" class="form-control" placeholder="ยังไม่ได้เลือกสินค้า" readonly>
                            <input type="hidden" id="selectedProductId">
                            <button type="button" id="btn-open-product-modal" class="btn btn-outline-primary">เลือกสินค้า</button>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">ตัวเปรียบเทียบ</label>
                        <select class="form-select ch" required>
                            <option value="=">=</option>
                            <option value=">">></option>
                            <option value="≥">≥</option>
                            <option value="<"><</option>
                            <option value="≤">≤</option>
                        </select>
                        <div class="invalid-feedback">ต้องเลือกตัวเปรียบเทียบ</div>
                    </div>
                    <div class="col-md-5">
                        <label class="form-label">จำนวน/หน่วย</label>
                        <div class="input-group">
                            <input class="form-control ch" type="text" placeholder="เลือกจำนวน" required>
                            <select class="form-select ch" required>
                                <option value="1">บาท</option>
                                <option value="2">%</option>
                                <option value="3">ชิ้น</option>
                                <option value="4">โหล</option>
                                <option value="5">ลัง</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reward -->
            <div class="reward form-border p-3">
                <h1 class="modal-title fs-5">ผลตอบแทน</h1>
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">ผลตอบแทน</label>
                        <div class="input-group">
                            <select class="form-select ch condition-form-reward-action" required></select>
                            <select disabled class="form-select ch condition-form-reward-object" required></select>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">จำนวน/หน่วย</label>
                        <div class="input-group">
                            <input class="form-control ch" type="text" placeholder="เลือกจำนวน" required>
                            <select class="form-select ch" required>
                                <option value="1">บาท</option>
                                <option value="2">%</option>
                                <option value="3">ชิ้น</option>
                                <option value="4">โหล</option>
                                <option value="5">ลัง</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <input type="hidden" id="conditionBlockJson" name="conditionBlockJson">

            <!-- Table preview -->
            <div class="mt-3">
            <h6>Preview เงื่อนไขที่สร้าง</h6>
            <table class="table table-sm table-bordered" id="conditionTable">
                <thead>
                <tr>
                    <th>Action</th>
                    <th>Object</th>
                    <th>Product</th>
                    <th>Comparator</th>
                    <th>Value</th>
                    <th>Unit</th>
                    <th>Reward</th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
            </div>
            <button type="submit" class="btn btn-primary">สร้างเงื่อนไข</button>
        </form>
    </div>
  </div>
</div>